<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script async src="https://saturn.tech/widget.js"></script>
</head>

<body style="max-width: 60rem; margin: 0 auto; padding: 1rem 2rem;">
    <h1>Saturn Observatory</h1>
    <p>
        Our mission is to bring better observability tools and to increase the transparency of the Filecoin Saturn
        network.
    </p>
    <p>
        We built <a href="https://github.com/31z4/saturn-moonlet">Saturn Moonlet</a> â€“ a more powerful and insightful
        alternative to <a href="https://dashboard.saturn.tech/stats">Saturn Node Dashboard</a>. It's been running
        since July 2023 and gathered lots of public data about the Saturn network and its nodes. Now, we use these data
        to generate plots on this website, aiming to provide insights into the network state and performance.
    </p>

    <p>Reports are published every month:</p>
    <ul>
        <li><a href="?year=2023&month=8">August 2023</a></li>
        <li><a href="?year=2023&month=9">September 2023</a></li>
    </ul>

    <p>
        Raw CSV data that we use to generate the plots are available on IPFS and Filecoin under CID
        <a
            href="https://ipfs.io/ipfs/bafybeifa2w7rvvbfyjm6ca7gwc7kcwy5kipplnkyqtv543rdqfqkpk7z3i">bafybeifa2w7rvvbfyjm6ca7gwc7kcwy5kipplnkyqtv543rdqfqkpk7z3i</a>.
    </p>

    <p>To learn more about how data is gathered and analyzed, check the project's <a
            href="https://github.com/31z4/saturn-observatory">GitHub</a>.</p>

    <p>
        Saturn Observatory is neither affiliated with the <a href="https://github.com/filecoin-saturn">Filecoin
            Saturn</a>
        project nor the <a href="https://protocol.ai">Protocol Labs</a> organization.
        Although, it was built during the <a href="https://www.encode.club/open-data-hack">Open Data Hack</a> powered by
        Filecoin.
    </p>

    <p>
        If you spot inconsistencies, or inaccurate claims, or want to request additional plots, please reach out to
        Elisey Zanko using any of the following channels:
    </p>

    <ul>
        <li>The #filecoin-saturn channel in Filecoin Slack (<a href="https://filecoin.io/slack">invite link</a>)</li>
        <li>Email: <a href="mailto:elisey.zanko@gmail.com">elisey.zanko@gmail.com</a></li>
    </ul>

    <h2 id="network-size-and-traffic">Network Size & Traffic</h2>
    <p>
        The total number of nodes is estimated using the number of unique node IDs reported by the <a
            href="https://orchestrator.strn.pl/stats">orchestrator API</a> as "active".
        Traffic is estimated using the <a
            href="https://uc2x7t32m6qmbscsljxoauwoae0yeipw.lambda-url.us-west-2.on.aws">lambda
            API</a> that is used by <a href="https://dashboard.saturn.tech/address/all">Saturn Dashboard</a>.
    </p>

    <div id="saturn-active-node"></div>

    <h2 id="ttfb-and-retrievals">Time to First Byte & Retrievals</h2>

    <p>
        Time to First Byte (TTFB) is a metric that measures the time between the request for a resource and when the
        first byte of a response begins to arrive.
        To construct this chart, per hour TTFB percentiles for every node in the network were scrapped from the <a
            href="https://orchestrator.strn.pl/stats">orchestrator API</a>.
        The total number of retrievals is estimated using <a
            href="https://uc2x7t32m6qmbscsljxoauwoae0yeipw.lambda-url.us-west-2.on.aws">lambda
            API</a> that is used by <a href="https://dashboard.saturn.tech/address/all">Saturn Dashboard</a>.
    </p>

    <div id="saturn-retrievals"></div>

    <h2 id="network-geography">Network Geography</h2>
    <p>
        The total number of nodes is estimated using the number of unique node IDs reported by the <a
            href="https://orchestrator.strn.pl/stats">orchestrator API</a> as "active" during the month.
    </p>

    <div id="saturn-active-node-world" style="height: 50vh;"></div>

    <h2 id="earnings-and-traffic-by-country">Earnings & Traffic by Country</h2>
    <p>
        Earnings per node for each country are estimated by dividing the total earnings in the country by the total
        number of active nodes in that country.
        Earnings are estimated by combining per node info scrapped from <a
            href="https://uc2x7t32m6qmbscsljxoauwoae0yeipw.lambda-url.us-west-2.on.aws">lambda
            API</a> that is used by <a href="https://dashboard.saturn.tech/address/all">Saturn Dashboard</a> with
        the physical location of the node reported by the <a href="https://orchestrator.strn.pl/stats">orchestrator
            API</a>.
        Note that such estimation is a bit rough because earnings and traffic are <a href="#nodes-without-traffic">not
            distributed evenly</a>.
        Traffic is the total bandwidth served by each country during the month.
        Traffic is estimated similarly to the earnings.
    </p>
    <p>
        Note that to make the chart readable and fit it on the screen not every country name is displayed.
        To see all countries either hover the pointer over the bar chart or click and drag vertically to zoom.
    </p>

    <div id="saturn-country-stats" style="height: 100vh;"></div>

    <h2 id="earnings-and-traffic-by-country-over-time">Earnings & Traffic by Country, over time</h2>
    <p>
        Earnings, traffic and the number of nodes are estimated similarly to the <a
            href="#earnings-and-traffic-by-country">above</a>.
    </p>

    <div id="saturn-active-node-and-traffic"></div>

    <h2 id="nodes-without-traffic">Nodes Without Traffic</h2>
    <p>
        This chart shows the percentage of nodes that haven't been receiving any traffic despite being continuously
        active for a given period. For example, to estimate it for 2 hour period we take all the nodes that were
        continuously reported as active by the <a href="https://orchestrator.strn.pl/stats">orchestrator API</a> during
        the
        past 2 hours. For every node ID in this list, we calculate its traffic for the past 2 hours using the <a
            href="https://uc2x7t32m6qmbscsljxoauwoae0yeipw.lambda-url.us-west-2.on.aws">lambda
            API</a> that is used by <a href="https://dashboard.saturn.tech/address/all">Saturn Dashboard</a>.
        The result is the ratio between nodes without traffic and the active nodes.
    </p>
    <p>
        Gaps on the chart might be caused by several reasons. Including but not limited to issues with our API scrapper,
        issues with the orchestrator or the lambda API, or issues with the Saturn network itself.
    </p>

    <div id="saturn-active-node-without-traffic"></div>

    <h2 id="earnings-and-traffic-distribution">Earnings & Traffic Distribution</h2>
    <p>
        To construct this chart, first, we calculate earnings and traffic for every node that was reported as "active"
        by the <a href="https://orchestrator.strn.pl/stats">orchestrator API</a> during the month. Earnings and traffic
        are estimated using info scrapped from the <a
            href="https://uc2x7t32m6qmbscsljxoauwoae0yeipw.lambda-url.us-west-2.on.aws">lambda
            API</a> that is used by <a href="https://dashboard.saturn.tech/address/all">Saturn Dashboard</a>. Then we
        create two lists of node IDs, sorted in descending order. One is sorted by earnings, and another
        one is sorted by traffic. Now, for each node in each list, we calculate what percentage of the network this node
        and the nodes above it in the list make up. We plot this value on the X asix. On the Y axis, for each node in
        each list, we plot the cumulative percentage of earnings and traffic this node and the nodes above it in the
        list receive.
    </p>
    <p>
        Therefore, we have the chart that shows that X percent of the network receives Y percent of the network's
        traffic or earnings.
    </p>

    <div id="saturn-active-node-distribution"></div>

    <h2 id="node-age">Node Age</h2>
    <p>
        To estimate the age of a node we subtract the node creation timestamp from the time when the node was last
        reported "active" by the <a href="https://orchestrator.strn.pl/stats">orchestrator API</a>. Node creation
        timestamp is also scrapped using the orchestrator API.
    </p>

    <div id="saturn-active-node-age"></div>

    <h2 id="node-age-corellation">Correlation Between Node Age and Earnings & Traffic</h2>
    <p>
        Each marker on this chart is a node where its X coordinate is the node's age and its Y coordinate is the node's
        earnings or traffic during the month. Age is estimated similarly to the above. Earnings and traffic are
        estimated using info scrapped from the <a
            href="https://uc2x7t32m6qmbscsljxoauwoae0yeipw.lambda-url.us-west-2.on.aws">lambda
            API</a> that is used by <a href="https://dashboard.saturn.tech/address/all">Saturn Dashboard</a>.
    </p>

    <div id="saturn-node-age-correlation"></div>

    <script type="module" src="main.js"></script>
</body>

</html>
